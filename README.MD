Utility nodes for ComfyUI. Created solely for my own use case, shared as a courtesy only.

## üõ†Ô∏è Installation

cd /path/to/ComfyUI/custom_nodes  
git clone https://github.com/heyburns/LinxUtil.git  
Restart ComfyUI and refresh the browser  

---

## ‚ú® Current Nodes

### 1) Multipurpose Configuration
A minimal utility node that exposes two *in-node* controls and emits their values as sockets:

- **Megapixels (FLOAT)** ‚Äî set a target megapixel resolution value directly in the node (no external input required). Ideal for driving resizers that accept a `FLOAT` input.  
- **Mask Prompt (STRING)** ‚Äî a multiline text field where you can type prompt text for masking/selection nodes that accept a `STRING`.

<p align="center">
  <img src="assets/multipurpose_configuration.png" alt="Multipurpose Configuration node" width="540">
</p>

### 2) Auto White-Balance + Color Match

Fast, reference-driven color normalization for ComfyUI. Applies auto white balance and (optionally) matches a source image‚Äôs look to a reference. Minimal controls, predictable results.

**Display name:** Auto White-Balance + Color Match  
**Category:** Image/Color

### Inputs
- **image (IMAGE)** ‚Äî source to correct  
- **reference (IMAGE)** ‚Äî target look (only used by match modes)

### Output
- **IMAGE** ‚Äî corrected image (same size as input)

### Modes (pick one)
- **wb_grayworld** ‚Äî neutralize cast by equalizing channel means.
- **wb_highlight** ‚Äî white-patch WB using top luminance percentile.
- **reinhard_lab** ‚Äî match Lab mean/std to reference (full color).
- **lab_l_only** ‚Äî match lightness only (keeps source colors).
- **wb_highlight+reinhard** ‚Äî highlight WB then Lab match (sane default).

### Controls (brief)
- **percentile (80‚Äì99.9)** ‚Äî for `wb_highlight` modes; higher = brighter ‚Äúwhite patch.‚Äù
- **strength (0‚Äì1)** ‚Äî blend amount; 1 = full effect.
- **clip_gamut (bool)** ‚Äî clamp to sRGB after processing.
- **force_size (bool)** + **target_width/height** ‚Äî compute stats at this size for speed; apply at full res.

### Notes
- If result feels strong, lower **strength** or switch to **lab_l_only**.  
- If highlights skew WB, lower **percentile** a bit (e.g., 92‚Äì95).

<p align="center">
  <img src="assets/auto_color_match.png" alt="Auto White-Balance + Color Match node" width="540">
</p>

### 3) Strip Filename Extension

Removes the trailing file extension from a filename string (e.g., `photo.png` ‚Üí `photo`). Uses Python‚Äôs `os.path.splitext` for robust behavior across platforms.

**Category:** `Custom/Utility`  
**Display name:** `Strip Filename Extension`

**Input**
- `filename` (STRING) ‚Äî e.g., `image.v1.final.jpg`

**Output**
- `root_filename` (STRING) ‚Äî e.g., `image.v1.final`

> Tip: If you want to strip compound extensions like `.tar.gz`, you can extend the node with a small loop (commented in the source) to peel multiple suffixes.

<p align="center">
  <img src="assets/strip_extension.png" alt="Strip Filename Extension node" width="540">
</p>